{% extends 'base.html' %}

{% block content %}
<h2>{{ task.title }}</h2>

<div class="task-card {% if task.status == 'Completed' %}completed{% endif %}">
    <p><strong>Description:</strong> {{ task.description }}</p>
    <p><strong>Deadline:</strong> {{ task.deadline }}</p> 
    <p><strong>Status:</strong> {{ task.status }}</p>
    <p><strong>Priority:</strong> {{ task.priority }}</p>
    <p><strong>Assigned To:</strong> {{ task.assigned_to }}</p>
    <p><strong>Categories:</strong> {% for cat in task.categories.all %}{{ cat.name }}{% if not forloop.last %}, {% endif %}{% endfor %}</p>

    {% if task.attachment %}
        <p><strong>Attachment:</strong> <a href="{{ task.attachment.url }}">Download</a></p>
    {% endif %}
</div>

{% if request.user == task.assigned_to or request.user.is_superuser %}
<form action="{% url 'edit_task' task.id %}";">
    <button type="submit">Edit</button>
</form>
<br>
<form action="{% url 'delete_task' task.id %}" method="post" onsubmit="return confirm('Are you sure you want to delete this task?');">
    {% csrf_token %}
    <button type="submit" class="delete-btn">Delete</button>
</form>
{% endif %}

<a href="{% url 'task_list' %}">‚Üê Back to Task List</a>
{% endblock %}
